(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[5],{515:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},516:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]')},534:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_symbol","type":"string"},{"internalType":"string","name":"baseTokenURI","type":"string"},{"internalType":"bool","name":"_allowMinting","type":"bool"},{"internalType":"address","name":"_chargeToken","type":"address"},{"internalType":"address","name":"_PortuDAO_Treasury","type":"address"},{"internalType":"uint256","name":"_fee","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"BURN","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"MINT","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"name":"RoleAdminChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleGranted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"name":"RoleRevoked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINTER_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"getCreationDate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPortuDAO_Treasury","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleAdmin","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getRoleMember","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"name":"getRoleMemberCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getmintEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"grantRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"hasRole","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"bytes","name":"_signature","type":"bytes"},{"internalType":"string","name":"_nonce","type":"string"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"renounceRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"name":"revokeRole","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"setMintAbility","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_fee","type":"uint256"}],"name":"setPortuDAO_Fee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_PortuDAO_Treasury","type":"address"}],"name":"setPortuDAO_Treasury","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_chargeToken","type":"address"}],"name":"setPortuDAO_chargeToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes","name":"_signature","type":"bytes"},{"internalType":"string","name":"_nonce","type":"string"}],"name":"validateSignature","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},549:function(e,t){},552:function(e,t){},555:function(e,t){},559:function(e,t){},579:function(e,t){},581:function(e,t){},590:function(e,t){},592:function(e,t){},602:function(e,t){},604:function(e,t){},718:function(e,t){},720:function(e,t){},727:function(e,t){},728:function(e,t){},886:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Z}));var a,s,r=n(6),i=n(63),p=n(19),o=n(38),u=n(263),y=n(194),l=n(57),d=n(132),c=n(60),m=n(58),b=n.n(m),f=n(90),T=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t){var n,a,s,i;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.a)(t),a=new d.a.providers.Web3Provider(n),a.getSigner(),s="".concat("https://apidao.ddns.net","/api/membership/signature"),e.next=6,b.a.get(s);case 6:if(!(i=e.sent)||!i.data){e.next=9;break}return e.abrupt("return",i.data);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=T,v=n(525),A=n(534);!function(e){e[e.MAINNET=56]="MAINNET",e[e.TESTNET=97]="TESTNET"}(a||(a={})),function(e){e[e.MAINNET=137]="MAINNET",e[e.TESTNET=80001]="TESTNET"}(s||(s={}));var O={usdc:{chainId:s.MAINNET,address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",decimals:18,symbol:"USDC",name:"Polygon-Peg USD Coin",projectLink:"https://www.centre.io/usdc"}},g=(s.TESTNET,{feeAddress:O.usdc.address,allowance:50,address:"0x8e68c81ba9e3264e236b6d2273f601b385baa7b3",abi:A}),w="".concat("https://polygon-mainnet.g.alchemy.com/v2/").concat("klN_-u-pyF6u7jDQG06SZO80PLWW904d"),E=Object(v.a)(w),x=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){var a,s,i,p,o,u,y;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new E.eth.Contract(g.abi,g.address),console.log("signature mint",t),console.log("message mint",n),s="metamask",i=Object(f.a)(s),p=new d.a.providers.Web3Provider(i),o=p.getSigner(),e.next=10,o.getAddress();case 10:return u=e.sent,y={to:g.address,from:u,gas:d.a.utils.hexlify(45e4),data:a.methods.mint(u,t,n).encodeABI()},e.next=14,i.request({method:"eth_sendTransaction",params:[y]}).catch((function(e){console.warn("error",e)}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.warn("Membership mint error",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),h=x,P=n(297),M=n(515),C=n(516),I=(new P.b(M),new P.b(C),n(25)),j=n(138),k=n(108),N=n(46),S=n(838),R=n.n(S);var D=["https://polygon-rpc.com/","https://polygon-rpc.com/","https://polygon-rpc.com/"],L=function(){return Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_HOSTNAME:"https://apidao.ddns.net",REACT_APP_ALCHEMY_API_KEY:"klN_-u-pyF6u7jDQG06SZO80PLWW904d",REACT_APP_ALCHEMY_HOSTNAME:"https://polygon-mainnet.g.alchemy.com/v2/",REACT_APP_PUBLIC_NODE_1:"https://polygon-rpc.com/",REACT_APP_PUBLIC_NODE_2:"https://polygon-rpc.com/",REACT_APP_PUBLIC_NODE_3:"https://polygon-rpc.com/",REACT_APP_PUBLIC_CHAIN_ID:"137"}).REACT_APP_PUBLIC_NODE_PRODUCTION?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_HOSTNAME:"https://apidao.ddns.net",REACT_APP_ALCHEMY_API_KEY:"klN_-u-pyF6u7jDQG06SZO80PLWW904d",REACT_APP_ALCHEMY_HOSTNAME:"https://polygon-mainnet.g.alchemy.com/v2/",REACT_APP_PUBLIC_NODE_1:"https://polygon-rpc.com/",REACT_APP_PUBLIC_NODE_2:"https://polygon-rpc.com/",REACT_APP_PUBLIC_NODE_3:"https://polygon-rpc.com/",REACT_APP_PUBLIC_CHAIN_ID:"137"}).REACT_APP_PUBLIC_NODE_PRODUCTION:R()(D)}(),U=new N.a(L);function F(e,t,n){if(!function(e){try{return Object(I.a)(e)}catch(t){return!1}}(e)||e===j.a)throw Error("Invalid 'address' parameter '".concat(e,"'."));return new k.b(e,t,null!==n&&void 0!==n?n:U)}var B,W="".concat("https://polygon-mainnet.g.alchemy.com/v2/").concat("klN_-u-pyF6u7jDQG06SZO80PLWW904d"),H=Object(v.a)(W),K=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,a,s,i,p,o,u,y;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=g.feeAddress,n=new H.eth.Contract(M,g.feeAddress),a=Object(f.a)("metamask"),s=new d.a.providers.Web3Provider(a),i=s.getSigner(),p=F(t,M,i),e.next=9,i.getAddress();case 9:return o=e.sent,console.log("Address:",o),e.next=13,p.allowance(o,g.address);case 13:if(u=e.sent,console.log("Allowance:",u),!(u<g.allowance)){e.next=19;break}return y={to:t,from:o,data:n.methods.approve(g.address,d.a.utils.parseUnits(g.allowance.toString(),18)).encodeABI()},e.next=19,a.request({method:"eth_sendTransaction",params:[y]}).catch((function(e){console.warn("error",e)}));case 19:return e.abrupt("return",!0);case 22:return e.prev=22,e.t0=e.catch(0),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}(),Y=K,G=n(0),J=n(5),Q=Object(l.a)(u.a)(B||(B=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin-right: ","px;\n  margin-left: ","px;\n  min-height: calc(100vh - 148px);\n"])),c.a.xxl,c.a.xxl);function Z(){var e=Object(G.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1],s=Object(G.useState)(!0),o=Object(p.a)(s,2),u=o[0],l=o[1],c=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,s,i,p,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(f.a)("metamask"),n=new d.a.providers.Web3Provider(t),s=n.getSigner(),i=F(g.feeAddress,M,s),console.log("Contract all",i),e.next=8,s.getAddress();case 8:return p=e.sent,console.log("Address all:",p),console.log("membershipContract.address: all",g.address),e.next=13,i.allowance(p,g.address);case 13:o=e.sent,console.log("allowance:",o),console.log("membershipContract.allowance:",g.allowance),o>=g.allowance&&a(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("Error checking allowance",e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();Object(G.useEffect)((function(){c(),l(!1)}),[]);var m=function(){var e=Object(i.a)(Object(r.a)().mark((function e(t,n){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){var t,n,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Date.now(),e.next=3,_("metamask");case 3:if(!(t=e.sent)){e.next=8;break}return n=t.signature,a=t.nonce,e.next=8,m(n,a.toString());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(J.jsx)(Q,{children:!u&&(n?Object(J.jsx)(y.a,{variant:"contained",onClick:b,children:"MINT NFT"}):Object(J.jsx)(y.a,{variant:"contained",onClick:T,children:"APPROVE TOKEN"}))})}}}]);
//# sourceMappingURL=5.55b3ab2b.chunk.js.map